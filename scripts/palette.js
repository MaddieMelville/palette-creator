((function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O;l="scripts/neuquant.worker.js",m="initial",p="waiting",o="loading",n="loaded",e="",c=0,a=1,j=1,g=30,q=1,d=0,b=16,k=8,h=64,r=1,i=5,f=10,O=null,u=null,w=null,s=null,M=null,J=null,L=null,N=e,F=c,K=d,x=function(){return B(),y(),F!==c&&K!==d?(A(N,!0),H(m)):(z(N,!0),A(N,!1),H(p))},y=function(){return O=document.getElementById("wrapper"),u=document.getElementById("frame"),w=document.getElementById("image"),s=document.getElementById("colors"),M=document.getElementById("url"),J=document.getElementById("size"),L=document.getElementById("sizevalue")},B=function(){N=decodeURIComponent(Query.url||""+e),F=parseInt(decodeURIComponent(Query.sample||""+c)),K=parseInt(decodeURIComponent(Query.size||""+d));if(F===c||F<j||F>g)F=a;if(K===d||K<k||K>h)return K=d},z=function(a,c){return M.value=a,J.min=k,J.max=h,J.step=r,J.value=b,c&&J.addEventListener("change",function(a){return L.textContent=a.target.value},!0),Utils.fireEvent(J,"change")},A=function(a,b){var c;return c=E(i,f),u.style.cssText="-webkit-transform: rotate("+c+"deg)",b&&w.addEventListener("load",function(a){return C(a.target)},!0),w.src=a},E=function(a,b){var c;return c=Math.floor(Math.random()*2)?1:-1,c*(Math.random()*(b-a)+a)},H=function(a){var b;O.className=a,b=chrome.i18n.getMessage("msg_"+a);if(b!=null)return G(b)},G=function(a){return u.title=a,w.alt=a},C=function(a){var b;return H(o),b=new Worker(l),b.onmessage=function(a){var b;b=a.data;switch(b.type){case"log":if(typeof console!="undefined"&&console!==null)return console.log(b.message);break;case"palette":return I(b.palette),H(n)}},b.onerror=function(a){throw new Error(""+a.message+" ("+a.filename+":"+a.lineno+")")},b.postMessage({type:"quantize",pixels:v(a),sample:F,colors:K})},v=function(a){var b,c,d,e,f,g;b=document.createElement("canvas"),b.width=a.naturalWidth,b.height=a.naturalHeight,c=b.getContext("2d"),c.drawImage(a,0,0),f=c.getImageData(0,0,b.width,b.height).data,e=[];for(d=0,g=f.length;0<=g?d<g:d>g;0<=g?d++:d--)e[d]=f[d];return e},I=function(a){var b,c,d,e,f,g,h,i,j;d=document.createDocumentFragment(),h=a.length>>2;for(g=0,j=h-1;0<=j?g<=j:g>=j;0<=j?g++:g--)f=g<<2,i=a[f],e=a[f+1],b=a[f+2],c=t(i,e,b),d.appendChild(c);while(s.hasChildNodes())s.removeChild(s.firstChild);return s.appendChild(d)},t=function(a,b,c){var d;return d=D(a,b,c),Utils.createElement({tagName:"li",className:"color",childNodes:[{tagName:"div",className:"strip",cssText:"background-color: rgb("+a+", "+b+", "+c+")"},{tagName:"div",className:"info",childNodes:[{tagName:"p",textContent:"RGB: "+a+", "+b+", "+c},{tagName:"p",textContent:"HEX: #"+d}]}]})},D=function(a,b,c){var d;d=a<<16|b<<8|c,d=d.toString(16).toUpperCase();while(d.length<6)d="0"+d;return d},window.addEventListener("load",x,!0)})).call(this);